# LAB 2 A Variant of the Fibonacci Sequence

PB20151793 宋玮

### 实验目的

计算如下斐波拉契数列：

![image-20221126161604460](C:\Users\宋玮\AppData\Roaming\Typora\typora-user-images\image-20221126161604460.png)

p存储在x3100，q存储在x3101，N存储在x3102；

计算F(N)，并将结果存储在x3103.



### 实验思路

本次实验主要涉及以下三个问题：

1. 如何处理F(N), F(N-2), F(N-1)的关系？

2. 如何计算%p？
3. 如何计算%q？

**解决方案：**

对于问题1，只需要利用循环，进行迭代累加即可。

对于问题2，考虑到 $p=2^k$ , 可以利用其特殊性，**“模 $p$ 运算“** 可以转换为 **”和 $\sim p$ 的 $AND$ 操作“**。

对于问题3，由于 $q$ 是 10~1024 间任意一个整数，并不具有特殊性；因此模 $q$ 运算只能采取**循环减**的方式；**每次减去 $q$ ，直到得到一个比 $q$ 小的正整数或0；**该数即是模 $q$ 运算 的结果。



### 实验过程

实验代码如下

![image-20221126163924894](C:\Users\宋玮\AppData\Roaming\Typora\typora-user-images\image-20221126163924894.png)

**①部分：**令 R1 = ~p

**②部分：**令 R2 = -q

**③部分：**判断，若 N < 2，则无需进行循环，直接将结果 F(N) = 1 存入x3103

**④部分：**主要循环体，循环迭代加，实现：

![image-20221126164336031](C:\Users\宋玮\AppData\Roaming\Typora\typora-user-images\image-20221126164336031.png)

其中，R3 = F(N-2)，R4 = F(N-1)

**⑤部分：**实现%p（模p运算）

**⑥部分：**循环减，实现%q（模q运算）



每执行一次 LOOP，N需要减1；

循环结束后，将最后结果存在x3103即可。



### 实验结果

![image-20221126165042271](C:\Users\宋玮\AppData\Roaming\Typora\typora-user-images\image-20221126165042271.png)



利用在线评测，7组评测样例，结果如下：

![image-20221126165146592](C:\Users\宋玮\AppData\Roaming\Typora\typora-user-images\image-20221126165146592.png)



### answer to question

如何提高循环体效率？

在进行模 $p$ 运算时，利用其特殊性，将**“模 $p$ 运算“** 转换为 **”和 $\sim p$ 的 $AND$ 操作“**；这样就不需要进行循环减操作，而只需要一次 $AND$ 操作，大大提升了循环体效率。

**当然，对于特殊的 $p$ 和 $q$，该斐波拉契数列会出现周期性，利用周期性，可以大大提高循环体效率。**
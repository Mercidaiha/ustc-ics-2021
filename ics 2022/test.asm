.ORIG x3000
LD R0, STUDENT

;SORTING
LOOP1
ADD R2, R0, #-1
LD R1, DATA ;R1 is the pointer
LOOP2
LDR R3, R1, #0
LDR R4, R1, #1
ADD R5, R3, #0
NOT R5, R5
ADD R5, R5, #1
ADD R5, R5, R4
BRZP NOOP
STR R4, R1, #0 ;exchange
STR R3, R1, #1
NOOP
ADD R1, R1, #1
ADD R2, R2, #-1
BRP LOOP2
ADD R0, R0, #-1
BRP LOOP1

;STORE THE SORTING RESULT
LD R0, STUDENT
LD R1, DATA ;R1 is the pointer
LD R2, SORT ;R2 is the pointer
STORE
LDR R3, R1, #0
STR R3, R2, #0
ADD R1, R1, #1
ADD R2, R2, #1
ADD R0, R0, #-1
BRP STORE

;COUNTING THE A
LD R1, DATA
ADD R1, R1, #12 ; top 25%
LD R2, NA
AND R0, R0, #0
ADD R0, R0, #4
AND R5, R5, #0
LOOPA
LDR R3, R1, #0
ADD R4, R3, R2
BRN NOA
ADD R5, R5, #1
NOA
ADD R1, R1, #1
ADD R0, R0, #-1
BRP LOOPA
LD R6, ANUM
STR R5, R6, #0



HALT

DATA .FILL x4000
SORT .FILL x5000
ANUM .FILL x5100
BNUM .FILL x5101
STUDENT .FILL #16
NA .FILL #-85
NB .FILL #-75
.END
.ORIG x3000
LDI R0, N
LDI R1, P
NOT R1, R1 ; ~P
LDI R2, Q
NOT R2, R2
ADD R2, R2, #1 ; -Q
ADD R3, R3, #1
ADD R4, R4, #1
ADD R0, R0, #-2
BRn STORE
LOOP
AND R5, R3, R1
ADD R3, R4, #0
MODULEQ
ADD R6, R4, #0
ADD R4, R6, R2
BRp MODULEQ
ADD R4, R6, R5
ADD R0, R0, #-1
BRzp LOOP
STORE
STI R4, RESULT
HALT

P .FILL x3100
Q .FILL x3101
N .FILL x3102
RESULT .FILL x3103

.END
